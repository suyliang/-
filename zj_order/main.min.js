var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),GameHttp=function(){function t(){this.url_get="http://httpbin.org/get",this.url_post=OrderData.severPath+"jsapi.php"}return t.prototype.sendGetRequest=function(t){void 0===t&&(t="");var e;""==t&&(e="?p1=getP1&p2=getP2");var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(this.url_get+e,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),i.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),console.log("Sending get request to httpbin.org")},t.prototype.onGetComplete=function(t){var e=t.currentTarget;this.fire("GET","SUCCESS",e.response)},t.prototype.onGetIOError=function(t){console.log("get error : "+t),this.fire("GET","ERROR",t)},t.prototype.onGetProgress=function(t){console.log("get progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},t.prototype.sendPostRequest=function(t){void 0===t&&(t="");var e=t.trim();""==t&&(e="p1=postP1&p2=postP2");var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(this.url_post,egret.HttpMethod.POST),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf8"),i.send(e),i.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),i.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),console.log("Sending POST request to httpbin.org")},t.prototype.onPostComplete=function(t){var e=t.currentTarget;console.log("post data : ",e.response),this.fire("POST","SUCCESS",e.response)},t.prototype.onPostIOError=function(t){console.log("post error : "+t),this.fire("POST","ERROR",t)},t.prototype.onPostProgress=function(t){console.log("post progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},t.prototype.register=function(t,e,i){this.observer||(this.observer=new WX_Observer(e,i))},t.prototype.remove=function(t,e,i){delete this.observer},t.prototype.fire=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];(r=this.observer).notify.apply(r,[t].concat(e));var r},t}();__reflect(GameHttp.prototype,"GameHttp");var WX_Observer=function(){function t(t,e){this.callback=null,this.context=null;var i=this;i.callback=t,i.context=e}return t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;(r=i.callback).call.apply(r,[i.context].concat(t));var r},t.prototype.compar=function(t){return t==this.context},t}();__reflect(WX_Observer.prototype,"WX_Observer");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function r(r){e.call(i,r,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?r(o):RES.getResAsync(t,r,this)}else RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){var t=new OrderMain;this.stage.addChild(t)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){var e=this,i=new egret.HtmlTextParser,r=t.map(function(t){return i.parse(t)}),o=this.textfield,s=-1,n=function(){s++,s>=r.length&&(s=0);var t=r[s];o.textFlow=t;var i=egret.Tween.get(o);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(n,e)};n()},e.prototype.onButtonClick=function(t){var e=new eui.Panel;e.title="Title",e.horizontalCenter=0,e.verticalCenter=0,this.addChild(e)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,r){function o(t){e.call(r,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(r))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var CheckOrderList=function(t){function e(){var e=t.call(this)||this;return e.role_count=0,e.cook_count=0,e.total_money=0,e.thisList=[],e.items=[],e.groupHeight=20,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.creatList()},e.prototype.creatList=function(){var t=this;this.listGroup=new eui.Group,this.addChild(this.listGroup),this.myScroller=new eui.Scroller,this.myScroller.width=1e3,this.myScroller.height=1e3,this.myScroller.x=300,this.myScroller.y=186,this.myScroller.bounces=!1,this.addChild(this.myScroller),this.close_button.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeThis,this),this.radio1.group.addEventListener(eui.UIEvent.CHANGE,function(e){var i=e.target;i.selection==t.radio1?t.resetItems(1):i.selection==t.radio2&&t.resetItems(2)},this),this.gameHttp=new GameHttp,this.gameHttp.register("POST",this.httpGetResponse,this)},e.prototype.requestData=function(){var t=0;for(var e in OrderData.orderDataMap){t++;break}0!=t&&(this.role_count=this.cook_count=this.total_money=0,this.gameHttp.sendPostRequest("type=2&name=1&order=2"))},e.prototype.httpGetResponse=function(t,e,i){if("SUCCESS"==e){if(""==i.trim())return void console.log("请求的数据为空");this.thisList=[];for(var r=i.split("#"),o=0;o<r.length;o++){var s=r[o].trim();if(""==s)return;var n=s.split("|");if(2==n.length){var a="",h=0,l=n[1].length/3,c=n[1].length%3;if(!(0!=c&&3>l)){for(var p="",u=-1,d=0;l>=d;d++){if(d%3==0&&0!=d){var g=OrderData.orderDataMap[p.substring(0,p.length-1)];if(p="",null==g)continue;-1==u&&(u=g.dianId);var m=g.dianName+"   /   "+g.cookName+"    /    "+g.money+"元\n";h+=g.money,a+=m,this.cook_count++,this.total_money+=g.money}if(l>d){var v=n[1].substring(3*d,3*(d+1)),f="";if("000"==v)f="0";else for(var y=0;y<v.length;y++)if("0"!=v.charAt(y)){f=v.substring(y,3);break}p+=f+"_"}}this.addItem(this.role_count,{name:n[0],orderData:a,money:h,dianId:u,time:o}),this.thisList.push({name:n[0],orderData:a,money:h,dianId:u,time:o}),this.role_count++}}}for(var o=0;o<this.items.length;o++)o>=this.role_count?this.items[o].visible=!1:this.role_count>0&&o==this.role_count-1&&this.items[o].setLineVisible(!1);this.myScroller.viewport=this.listGroup,this.myScroller.validateNow(),this.myScroller.viewport.scrollV=0,this.all_label.text="人数："+this.role_count+"     点餐数量："+this.cook_count+"      总价格："+this.total_money}},e.prototype.addItem=function(t,e,i){void 0===i&&(i=-1);var r;this.items.length<=t?(r=new OrderListRender,this.items.push(r),this.listGroup.addChild(r)):r=this.items[t],r.visible=!0,r.y=this.groupHeight,r.dataChanged(e),this.groupHeight+=r.height+20,r.setLineVisible(!0),-1!=i&&t==i&&r.setLineVisible(!1)},e.prototype.resetItems=function(t){this.groupHeight=20,1==t?this.thisList.sort(this.sortByDianId):this.thisList.sort(this.sortByTime);for(var e=0;e<this.thisList.length;e++)this.addItem(e,this.thisList[e],this.thisList.length-1)},e.prototype.sortByDianId=function(t,e){return t.dianId-e.dianId},e.prototype.sortByTime=function(t,e){return t.time-e.time},e.prototype.closeThis=function(){this.role_count=this.cook_count=this.total_money=0,this.groupHeight=20,this.visible=!1},e.prototype.initScrollV=function(){this.myScroller.viewport.scrollV=0},e.prototype.mousewheel=function(t){if(this.myScroller){if(this.listGroup.contentHeight<this.listGroup.height)return;this.myScroller.viewport.scrollV-=30*t,this.myScroller.viewport.scrollV<0?this.myScroller.viewport.scrollV=0:this.myScroller.viewport.scrollV>this.listGroup.contentHeight-this.listGroup.height&&(this.myScroller.viewport.scrollV=this.listGroup.contentHeight-this.listGroup.height)}},e}(eui.Component);__reflect(CheckOrderList.prototype,"CheckOrderList",["eui.UIComponent","egret.DisplayObject"]);var ErWeiMa=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.close_button.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this)},e.prototype.closeFun=function(){this.visible=!1,egret.Tween.removeAllTweens()},e.prototype.setData=function(t){this.order_data_label.text=t,""==t?(this.tip_txt.text="呵呵！\n你确定已经提交订单了吗！",this.tip_txt.x=-931,egret.Tween.get(this.tip_txt,{loop:!0}).to({x:387},300).wait(1e3).to({x:1e3},300)):(this.tip_txt.width=931,this.tip_txt.height=78,this.tip_txt.text="已经点餐成功，请自觉扫码付款！")},e}(eui.Component);__reflect(ErWeiMa.prototype,"ErWeiMa",["eui.UIComponent","egret.DisplayObject"]);var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var OrderData=function(){function t(){}return t.orderDataMap={},t.severPath="http://192.168.1.70/zj_order_server/",t.stageWidth=1600,t.userName="",t}();__reflect(OrderData.prototype,"OrderData");var OrderListRender=function(t){function e(){var e=t.call(this)||this;return e.dianId=0,e.time=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(t){this.dianId=t.dianId,this.time=t.time,this.name_label.text=t.name+"",this.content_label.text=t.orderData,this.money_label.text="总计："+t.money,this.content_label.height=this.content_label.textHeight+10,this.content_label.height<130&&(this.content_label.height=130),this.height=this.content_label.height,this.line_rect.y=this.height-2},e.prototype.setLineVisible=function(t){this.line_rect.visible=t},e}(eui.Component);__reflect(OrderListRender.prototype,"OrderListRender",["eui.UIComponent","egret.DisplayObject"]);var OrderMain=function(t){function e(){var e=t.call(this)||this;return e.debug=!1,e.xoffest=50,e.checkBoxs=[],e.checkTitles=[],e.cloumHeights=[],e.currentIndex=0,e.datas=[],e.chooseDataMap={},e.erweimaData="",e.initView(),e}return __extends(e,t),e.prototype.initView=function(){this.gameHttp=new GameHttp,this.gameHttp.register("POST",this.httpGetResponse,this);var t=TClass.getInstance();t.register("mousewheel",this.mousewheel,this),t.register("getCookie",this.getUserInfo,this);var e=(getCookie("getUserInfo"),new eui.Label);e.textColor=0,e.size=23,e.width=1e3,e.x=50,e.y=40,e.lineSpacing=6,e.text="        各位小伙伴们，点餐系统的开放时间为上午9点-11点；下午16点-17点，请大家记得在该时间段内点餐哦。如忘记，可私聊前台吴奕绚或黄嘉莹补餐。提交订单后，请自觉扫码付款哈，感谢您的配合！祝您用餐愉快！\n备注：订单提交成功后，可在订单列表预览到您的点餐记录。",this.addChild(e);var i=new eui.Button;i.label="提交",i.x=OrderData.stageWidth-136,i.y=100,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureHandler,this),this.addChild(i);var r=new eui.Button;r.label="扫码付款",r.x=i.x-136,r.y=100,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openErWeiMa,this),this.addChild(r);var o=new eui.Button;o.label="订单列表",o.x=r.x-136,o.y=100,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkList,this),this.addChild(o),this.currentDian=new eui.Rect(120,1.5,0),this.addChild(this.currentDian),this.currentDian.x=this.xoffest,this.currentDian.y=245;var s=new eui.Rect(OrderData.stageWidth,2,0);s.y=250,this.addChild(s),this.listGroup=new eui.Group,this.addChild(this.listGroup),this.myScroller=new eui.Scroller,this.myScroller.width=OrderData.stageWidth,this.myScroller.height=850,this.myScroller.x=40,this.myScroller.y=300,this.myScroller.bounces=!1,this.addChild(this.myScroller),this.panelText=new eui.Label,this.panelText.x=30,this.panelText.y=80,this.panelText.width=340,this.panelText.height=200,this.panelText.size=22,this.panelText.lineSpacing=10,this.panelText.textColor=0,this.panelText.textAlign="center",this.panel=new eui.Panel,this.addChild(this.panel),this.panel.x=600,this.panel.y=300,this.panel.height=320,this.panel.addChild(this.panelText),this.panel.visible=!1,this.setData()},e.prototype.setData=function(){if(0==this.debug){var t=Number(1e6*Math.random()),e=OrderData.severPath+"cooklist.txt?"+t,i=this,r=new egret.HttpRequest,o=function(t){switch(t.type){case egret.Event.COMPLETE:var e=t.currentTarget;i.upData(e.response);break;case egret.IOErrorEvent.IO_ERROR:console.log("respHandler io error")}},s=function(t){console.log("progress:",t.bytesLoaded,t.bytesTotal)};r.once(egret.Event.COMPLETE,o,null),r.once(egret.IOErrorEvent.IO_ERROR,o,null),r.once(egret.ProgressEvent.PROGRESS,s,null),r.open(e,egret.HttpMethod.GET),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),r.send()}else this.upData()},e.prototype.upData=function(t){void 0===t&&(t=""),1==this.debug&&(t="店名：大塘烧鹅内容：分类：烧腊；手撕鸡套餐1|15；手撕鸡套餐2|15；手撕鸡套餐3|15；手撕鸡套餐4|15；手撕鸡套餐5|15；手撕鸡套餐6|15；手撕鸡套餐7|15；手撕鸡套餐8|15；手撕鸡套餐9|15；手撕鸡套餐10|15；手撕鸡套餐11|15；手撕鸡套餐12|16；分类：米饭；手撕鸡套餐13|15；手撕鸡套餐14|15；手撕鸡套餐15|15；手撕鸡套餐16|15；手撕鸡套餐17|15；手撕鸡套餐18|15；手撕鸡套餐19|15；手撕鸡套餐20|15；手撕鸡套餐21|15；手撕鸡套餐22|15；手撕鸡套餐23|15；手撕鸡套餐24|15；手撕鸡套餐13|15；手撕鸡套餐14|15；手撕鸡套餐15|15；手撕鸡套餐16|15；手撕鸡套餐17|15；手撕鸡套餐18|15；手撕鸡套餐19|15；手撕鸡套餐20|15；手撕鸡套餐21|15；手撕鸡套餐22|15；手撕鸡套餐23|15；手撕鸡套餐24|15；手撕鸡套餐13|15；手撕鸡套餐14|15；手撕鸡套餐15|15；手撕鸡套餐16|15；手撕鸡套餐17|15；手撕鸡套餐18|15；手撕鸡套餐19|15；手撕鸡套餐20|15；手撕鸡套餐21|15；手撕鸡套餐22|15；手撕鸡套餐23|15；手撕鸡套餐24|15；手撕鸡套餐13|15；手撕鸡套餐14|15；手撕鸡套餐15|15；手撕鸡套餐16|15；手撕鸡套餐17|15；手撕鸡套餐18|15；手撕鸡套餐19|15；手撕鸡套餐20|15；手撕鸡套餐21|15；手撕鸡套餐22|15；手撕鸡套餐23|15；手撕鸡套餐24|15；店名：都城快餐内容：分类：烧腊；明炉烧鸭1|15；明炉烧鸭|15；明炉烧鸭|15；明炉烧鸭|15；明炉烧鸭|15；明炉烧鸭1|15；明炉烧鸭|16；明炉烧鸭|15；明炉烧鸭|15；明炉烧鸭|15；分类：米饭；明炉烧鸭|15；明炉烧鸭2|15；明炉烧鸭|15；明炉烧鸭|15；明炉烧鸭3|15；"),this.response=t.split("\r\n").join("").trim();var e=this.response.split("店名：");if(0!=e.length){for(var i=0,r=0;r<e.length;r++)if(""!=e[r]){var o=e[r],s=o.split("内容："),n=new eui.Label;n.name=i+"",n.textColor=0,n.text=s[0],n.width=n.textWidth+50,n.x=this.xoffest,n.y=200,this.xoffest=this.xoffest+n.width,this.addChild(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDianMing,this);for(var a=[],h=s[1].split("分类："),l=0,c=0;c<h.length;c++)if(""!=h[c]){var p={type:"0",items:[]},u=h[c].split("；");p.type=u[0],u.shift(),u.pop(),p.items=u,a.push(p),this.initCookMap(i,l,s[0],p),l++}this.datas.push(a),i++}this.setDataRadios(this.currentIndex)}},e.prototype.initCookMap=function(t,e,i,r){for(var o=0;o<r.items.length;o++){var s=new OrderVo;s.dianId=t,s.typeId=e,s.cookId=o,s.type=r.type,s.dianName=i;var n=r.items[o].split("|");s.cookName=n[0],s.money=Number(n[1]),OrderData.orderDataMap[s.toString()]=s}},e.prototype.setDataRadios=function(t){this.cloumHeights=[];for(var e=this.datas[t],i=0,r=0,o=0,s=0,n=4,a=0;a<this.checkTitles.length;a++)this.listGroup.removeChild(this.checkTitles[a]),delete this.checkTitles[a];this.checkTitles=[];for(var a=0;a<e.length;a++){var h=new eui.Label;if(h.textColor=16219453,h.size=23,h.text=e[a].type,a%n==0&&(r=0,s=a/n-1),h.x=385*r,o=0,a>=n)for(var l=0;s>=l;l++)o+=this.cloumHeights[a-(l+1)*n];h.y=o,this.cloumHeights.push(50+45*e[a].items.length+30),this.listGroup.addChild(h),this.checkTitles.push(h);for(var c=0;c<e[a].items.length;c++){var p;this.checkBoxs.length<=i?(p=new eui.CheckBox,this.checkBoxs.push(p),this.listGroup.addChild(p)):p=this.checkBoxs[i],i++,p.visible=!0,p.selected=!1,p.name=t+"_"+a+"_"+c,null!=this.chooseDataMap[p.name]&&(p.selected=!0),p.addEventListener(egret.Event.CHANGE,this.chooseCook,this),p.label=e[a].items[c].replace("|","/")+"元",p.x=385*r,p.y=50+o+45*c}r++}for(var a=i;a<this.checkBoxs.length;a++)this.checkBoxs[a].visible=!1;this.myScroller.viewport=this.listGroup,this.myScroller.validateNow(),this.myScroller.viewport.scrollV=0},e.prototype.chooseDianMing=function(t){this.currentDian.x=t.currentTarget.x,this.currentIndex=Number(t.currentTarget.name),this.setDataRadios(this.currentIndex)},e.prototype.chooseCook=function(t){var e=t.currentTarget;if(1==e.selected){var i=OrderData.orderDataMap[e.name].clone();this.chooseDataMap[e.name]=i}else this.chooseDataMap[e.name]&&delete this.chooseDataMap[e.name]},e.prototype.sureHandler=function(){var t=0;for(var e in this.chooseDataMap){t++;break}0!=t&&(null==this.submitPanel&&(this.submitPanel=new SubmitPanel,this.submitPanel.sure_button.addEventListener(egret.TouchEvent.TOUCH_TAP,this.submitHandler,this),this.submitPanel.goon_button.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goonHandler,this),this.addChild(this.submitPanel)),this.submitPanel.visible=!0,this.submitPanel.setStatus(1),this.submitPanel.setData(this.chooseDataMap))},e.prototype.submitHandler=function(){""!=this.submitPanel.getName()&&(OrderData.userName=this.submitPanel.getName(),this.gameHttp.sendPostRequest(this.submitPanel.getUpLoadData("3")),setCookie("getUserInfo",this.submitPanel.getName(),365))},e.prototype.goonHandler=function(){""!=this.submitPanel.getName()&&this.gameHttp.sendPostRequest(this.submitPanel.getUpLoadData("1"))},e.prototype.httpGetResponse=function(t,e,i){if("SUCCESS"==e){if(""!=i){i=i.trim();var r=i.split("|");if("true"==r[1]&&"3"==r[0])return void this.submitPanel.setStatus(2);if("false"==r[1]&&"4"==r[0]){console.log("不在点餐时间内"),this.panel.visible=!0,this.panel.title="提示",this.panelText.text="系统开放时间为每天的\n09:00 - 11:00；16:00 - 17:00",this.chooseDataMap={},this.submitPanel.visible=!1;for(var o=0;o<this.checkBoxs.length;o++)this.checkBoxs[o].selected=!1;return}}this.chooseDataMap={},this.submitPanel.visible=!1;for(var o=0;o<this.checkBoxs.length;o++)this.checkBoxs[o].selected=!1;this.erweimaData=this.submitPanel.content_label.text,this.openErWeiMa()}},e.prototype.checkList=function(){null==this.checkOrderList&&(this.checkOrderList=new CheckOrderList,this.addChild(this.checkOrderList)),this.checkOrderList.visible=!0,this.checkOrderList.requestData()},e.prototype.openErWeiMa=function(){null==this.erWeiMa&&(this.erWeiMa=new ErWeiMa,this.addChild(this.erWeiMa)),this.erWeiMa.setData(this.erweimaData),this.erWeiMa.visible=!0},e.prototype.mousewheel=function(t){null==this.checkOrderList||null!=this.checkOrderList&&0==this.checkOrderList.visible?this.myScroller&&(this.myScroller.viewport.scrollV-=30*t,this.myScroller.viewport.scrollV<0?this.myScroller.viewport.scrollV=0:this.myScroller.viewport.scrollV>this.listGroup.contentHeight-this.listGroup.height&&(this.myScroller.viewport.scrollV=this.listGroup.contentHeight-this.listGroup.height)):this.checkOrderList.mousewheel(t)},e.prototype.getUserInfo=function(t){""!=t||null!=t?OrderData.userName=t:OrderData.userName=""},e}(egret.Sprite);__reflect(OrderMain.prototype,"OrderMain");var OrderVo=function(){function t(){}return t.prototype.toString=function(){return this.dianId+"_"+this.typeId+"_"+this.cookId},t.prototype.clone=function(){var e=new t;return e.dianId=this.dianId,e.typeId=this.typeId,e.cookId=this.cookId,e.type=this.type,e.dianName=this.dianName,e.cookName=this.cookName,e.money=this.money,e},t}();__reflect(OrderVo.prototype,"OrderVo");var SubmitPanel=function(t){function e(){var e=t.call(this)||this;return e.orderData="",e.skinName="resource/order_skins/SubmitPanel.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.cancel_button.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cancelHandler,this),this.cancel_button1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cancelHandler1,this),this.tip_label.text="注意：因为不需登录，姓名必须填写，且必须为自己的真实姓名",this.setStatus(1)},e.prototype.setData=function(t){this.name_label.text=OrderData.userName,this.orderData="",this.content_label.text="你点了：\n";var e=0;for(var i in t){var r=t[i],o=r.cookName+" ("+r.dianName+"    价格："+r.money+")\n";e+=r.money,this.content_label.text+=o,this.orderData=this.orderData+this.getCode(r.dianId)+this.getCode(r.typeId)+this.getCode(r.cookId)}this.content_label.height=this.content_label.textHeight+50,this.group1_group1.y=this.content_label.x+this.content_label.height,this.group1_rect.height=this.group1_group1.y+this.group1_group1.height,this.content_label.appendText("总计： "+e)},e.prototype.getName=function(){return this.name_label.text.trim()},e.prototype.getUpLoadData=function(t){void 0===t&&(t="3");var e="type="+t+"&name="+this.getName()+"&order="+this.orderData;return e},e.prototype.getCode=function(t){for(var e=t+"",i="",r=0;r<3-e.length;r++)i+="0";return i+=e},e.prototype.cancelHandler=function(){this.visible=!1,this.setStatus(1)},e.prototype.cancelHandler1=function(){this.setStatus(1)},e.prototype.setStatus=function(t){1==t?(this.group1.visible=!0,this.group2.visible=!1):(this.group2.visible=!0,this.group1.visible=!1)},e}(eui.Component);__reflect(SubmitPanel.prototype,"SubmitPanel",["eui.UIComponent","egret.DisplayObject"]);var TClass=function(){function t(){if(this.listeners={},t.s_instance)throw new egret.error("TClass is a singleton class.");this.init()}return t.getInstance=function(){return t.s_instance||(t.s_instance=new t,t.s_instance.init()),t.s_instance},t.prototype.init=function(){window.platformInstance=t.s_instance,console.log("初始化  window['platformInstance'] ！")},t.prototype.jsCallFun=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=this.listeners[t];if(r)for(var o=r.length,s=0;o>s;s++){var n=r[s];n.notify.apply(n,e)}},t.prototype.register=function(t,e,i){var r=this.listeners[t];r||(this.listeners[t]=[]),this.listeners[t].push(new Observer(e,i))},t.prototype.remove=function(t,e,i){var r=this.listeners[t];if(r){for(var o=r.length,s=0;o>s;s++){var n=r[s];if(n.compar(i)){r.splice(s,1);break}}0==r.length&&delete this.listeners[t]}},t.s_instance=null,t}();__reflect(TClass.prototype,"TClass");var Observer=function(){function t(t,e){this.callback=null,this.context=null;var i=this;i.callback=t,i.context=e}return t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;(r=i.callback).call.apply(r,[i.context].concat(t));var r},t.prototype.compar=function(t){return t==this.context},t}();__reflect(Observer.prototype,"Observer");